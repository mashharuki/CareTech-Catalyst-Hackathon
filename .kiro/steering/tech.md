# Tech Steering

## 技術スタック方針
- リポジトリは `pnpm` ワークスペースによるモノレポ構成を採用する。
- 主要実装言語は TypeScript（ESM）とし、契約ロジックは Compact を併用する。
- UI は React + Vite を基準とし、CLI/Contract は Node.js 実行を前提とする。

## パッケージ責務の技術境界
- `contract`: Compact 契約とその TypeScript 連携面（エクスポート・テスト）を担う。
- `cli`: ネットワーク接続、ウォレット、デプロイ/参加/操作など実運用手順を担う。
- `frontend`: ユーザー向け表示・操作層を担い、ドメイン操作は契約側の仕様に従う。

## 品質ゲートの原則
- フォーマットはリポジトリ全体で一貫させる（Biome）。
- 型安全性と静的検査を維持する（TypeScript + ESLint）。
- 振る舞いテストを優先し、契約ロジックは決定的なテストを維持する（Vitest）。

## ネットワーク・実行環境の原則
- 環境依存値（ノード、インデクサ、Proof Server、シード）はコードに固定せず、設定と実行文脈で管理する。
- 外部接続は常に失敗可能性を前提に設計し、復旧可能なログとエラー経路を持たせる。
- ローカル検証とリモート検証の手順は同じドメイン操作で追従できるようにする。

## 依存関係の原則
- 新規依存は「ドメイン価値への寄与」が明確な場合のみ追加する。
- 依存更新は安全性と互換性を優先し、テスト可能な単位で行う。
- 生成物やビルド成果物に依存する箇所は、生成フローを明示して破綻を防ぐ。
